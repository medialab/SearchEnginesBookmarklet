<html>
  <head>
    <title>Search Engines Bookmarklet</title>
    <style>
body {
  font-family: Sans-serif;
  margin: auto;
  padding-top: 3%;
  text-align: center;
}
img {
  height: 48px;
  margin: 12px;
}
    </style>
  </head>
  <body>
    <h1>Install Search Engines Bookmarklet</h1>
    <p>This bookmarklet (built for Firefox &amp; Chrome only) can be used to easily extract search results from Google, DuckDuckGo, Baidu, Qwant and Bing.</p>
    <p>Drag &amp; drop the image below into your bookmarks bar (you may first need to enable its display from your browser's menu):</p>
    <a id="bookmark" href=""><img src="images/new-google.png" alt="SearchEngineBookmarklet"/></a>
  </body>
  <script>
document.addEventListener("DOMContentLoaded", function() {
  var buildBookmarklet = function(hrefId, scriptName) {
    var res = "javascript:(function(){" +
                "var userAgent = navigator.userAgent," +
                  "href = window.location.href," +
                  "bod = document.getElementsByTagName('body')[0]," +
                  "CSP = 'CSP detected: this website forbids your browser to load the scripts required for the bookmarklet!'," +
                  "popup = '\\n\\nTry to enforce it using a browser extension such as the one that will open in a new tab (first allow it to pop-up).\\n\\nThen activate the extension, refresh the page and retry the bookmarklet.'," +
                  "script = document.createElement('script');" +
                "script.type = 'text/javascript';" +
                "script.src = '" + window.location.href.replace(/^https?:/, '').replace(/\/?(index.html)?$/, '/') + scriptName + ".js';" +
                "if(~href.search(/:\\/\\/([^.]+\\.)?bing\\.[^/]+\\//)){" +
                  "HTMLBodyElement.prototype.appendChild = Node.prototype.appendChild;" +
                "}" +
                "bod || (bod = document.createElement('body'), document.documentElement.appendChild(bod));" +
                "bod.appendChild(script);" +
                "script.onerror = function(){" +
                  "if(userAgent.indexOf('Chrome') > -1){" +
                    "window.alert(CSP + popup);" +
                    "window.open('https://chromewebstore.google.com/detail/allow-csp-content-securit/hnojoemndpdjofcdaonbefcfecpjfflh');" +
                  "}else if (userAgent.indexOf('Firefox') > -1){" +
                    "window.alert(CSP + popup + '\\n\\n(you should use the \"Record this site\" option of the extension)');" +
                    "window.open('https://addons.mozilla.org/en-US/firefox/addon/mheadercontrol/');" +
                  "}else{" +
                    "window.alert(CSP + '\\n\\nThis bookmarklet is intended to work only within Firefox or Chrome/Chromium.\\n\\nPlease use one of these browsers and retry.');" +
                  "}" +
                "}" +
              "})()";
    document.getElementById(hrefId).href = res.replace(/\s+/g, '%20');
  };
  buildBookmarklet("bookmark", "SearchEnginesBookmarklet");
});
  </script>
</html>
